
# 第7章

> **前回のT**
> 
> - 読み方の工夫は継続。時間を有効に使う。
> - 読んでないところ、わからないところは「TODO」残す
> - 質問が来そうなところは、先回りして説明コードを書いてみる
> 
> **読み方**
>   - 各節の末尾に まとめが書いてあるので、そこを読んでいく。
>   - 詳しく知りたい内容だったら、本文を読む。
>   - 上から順に読まない。
> - アウトプット
>   - 知らなかったことをまとめて書き出す。
> - 不明点（調査項目）
>   - みんなに質問したいこと
>   - 自分で追加調査したいこと

OSSなど一般公開するライブラリについて書かれているようだが、
社内向けライブラリでも考え方は同じ。

### ライブラリの命名

`EzGate` `ssh-ito-denwa` なんかもそう。
ググってすぐに出てくるのが大事。
`Reverse Proxy` `SSH port forwarder` とかでは埋もれる。
固有名詞。独特なスペル。あえて１文字変えるとか。

奇抜な名前。
日本語をローマ字表記にする。
Tsurugi DB の内部モジュール名は全て日本の地名とか。

説明的な名前がいいんだけど、奇抜要素だけになってしまっている場合もある。

### メソッド名

メソッド名の衝突。
アダプタパターンで回避。

### 数は少ないが複雑なメソッドで構成する

DRY原則の観点から考えれば、こちらを支持する。

```rb
def first_n_records(number: (only_one = 1), offset: 0)
end
```

`number:` を指定しなかった時だけ `only_one = 1` が入る。

引数を指定されなかったことを検知するやり方。
今までの自分のやり方。

```rb
def first_n_records(number: :not_set, offset: 0)
  if number == :not_set
    number = only_one = 1
  end
end
```

`nil` を指定するのとは違う。

```rb
# これだと、`nil` を渡した時に、指定されたのかされていないのか検出できない
def first_n_records(number: nil, offset: 0)
  number ||= 1 # 指定されなかったら 1 をセット
end
```

戻り値が変わるメソッドは要注意。
メソッドコメントを書いておかないと、直感に反する。
引数はいろいろ多彩な定義ができるので、多様性をカバーできる。

